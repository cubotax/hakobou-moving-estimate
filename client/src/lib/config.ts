/**
 * 引越し見積もりシステム 設定ファイル
 * 
 * このファイルで料金ルールを一元管理します。
 * ハードコードを避け、ここで変更することで料金体系を調整できます。
 */

import type { PricingConfig, OptionFeeConfig, EstimateOptions } from './types';

// ============================================
// 都道府県リスト
// ============================================

export const PREFECTURES = [
  '北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県',
  '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県',
  '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県',
  '岐阜県', '静岡県', '愛知県', '三重県',
  '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県',
  '鳥取県', '島根県', '岡山県', '広島県', '山口県',
  '徳島県', '香川県', '愛媛県', '高知県',
  '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県'
] as const;

export type Prefecture = typeof PREFECTURES[number];

// ============================================
// オプション料金設定
// ============================================

/**
 * オプション料金の定義
 * 
 * 各オプションは以下を持ちます：
 * - id: 一意の識別子
 * - label: 表示名
 * - fee: 料金（円）
 * - condition: 適用条件（オプション）
 */
export const OPTION_FEES: OptionFeeConfig[] = [
  {
    id: 'packing',
    label: '簡易梱包サービス',
    fee: 10000,
    condition: (options: EstimateOptions) => options.needsPacking === true,
  },
];

// ============================================
// 料金設定
// ============================================

/**
 * 料金設定
 */
export const PRICING_CONFIG = {
  /** 基本料金（30kmまで） */
  baseFee: 19800,
  
  /** 距離別単価（累進課金） */
  distanceRates: [
    { min: 0, max: 30, rate: 0 }, // 基本料金に含まれる
    { min: 30, max: 50, rate: 200 },
    { min: 50, max: 100, rate: 170 },
    { min: 100, max: 150, rate: 140 },
    { min: 150, max: Infinity, rate: 120 },
  ],

  /** 階数料金（階段作業） */
  floorFeeRule: {
    freeUntilFloor: 2,
    feePerFloor: 3000,
    label: '階段作業料金',
  },
  
  // オプション料金設定
  optionFees: OPTION_FEES,
};

// ============================================
// 繁忙期設定
// ============================================

export const BUSY_SEASON_CONFIG = {
  /** 繁忙期開始（月-日） */
  startDate: '03-01',
  
  /** 繁忙期終了（月-日） */
  endDate: '04-10',
  
  /** 割増率（0.3 = 30%増し） */
  surchargeRate: 0.3,
  
  /** 表示ラベル */
  label: '繁忙期加算（基本料金30%増）',
};

// ============================================
// 積み置き料金設定
// ============================================

export const STORAGE_FEE_CONFIG = {
  /** 1日あたりの積み置き料金（円） */
  perDayFee: 3000,
  
  /** 表示ラベル */
  label: '積み置き料金',
};

// ============================================
// 高速料金設定
// ============================================

export const HIGHWAY_FEE_CONFIG = {
  /** 県外移動時のみ高速料金を取得するか */
  onlyInterPrefecture: true,
  
  /** 取得不可時の表示テキスト */
  unavailableText: '取得不可（別途）',
  
  /** 取得不可時に0円として計算するか、別途扱いにするか */
  treatUnavailableAsZero: true,
};

// ============================================
// フォーム設定
// ============================================

export const FORM_CONFIG = {
  /** 階数の最小値 */
  minFloor: 1,
  
  /** 階数の最大値 */
  maxFloor: 50,
  
  /** デフォルト階数 */
  defaultFloor: 1,
};

// ============================================
// 距離プロバイダ設定
// ============================================

export const DISTANCE_PROVIDER_CONFIG = {
  /** 使用するプロバイダ */
  provider: 'google' as const,
  
  /** リトライ回数 */
  maxRetries: 3,
  
  /** タイムアウト（ミリ秒） */
  timeout: 10000,
};
